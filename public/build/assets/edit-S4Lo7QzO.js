import{m as E,j as a,L as V}from"./app-BdSiAjyP.js";import{L as t,I as q,a as I}from"./input-error-Chbo7qiN.js";import{B as T}from"./leaf-DbhNcTOD.js";import{S as d,a as u,b as p,c as x,d as h}from"./select-DcjTyB4S.js";import{A as $}from"./app-layout-DfYskyfE.js";import{L as P}from"./loader-circle-BLYiJTqK.js";import"./index-BWqvCfnA.js";import"./index-Da7dyP6f.js";import"./toast-CmT7txdK.js";import"./index-A8wZ14uY.js";import"./Combination-D340P4z7.js";import"./index-DdAhsHyQ.js";import"./index-CdHozyMW.js";function X({breadcrumb:j,kriteria:b,jenisTanaman:y,titlePage:N,dataset:n,opsiLabel:B,opsiGejala:L}){const S=j?j.map(r=>({title:r.title,href:r.href})):[],{data:l,setData:o,put:C,processing:k,errors:f}=E({id:(n==null?void 0:n.id)??0,jenis_tanaman:(n==null?void 0:n.jenis_tanaman)||"",label:(n==null?void 0:n.label)||"",attribut:b.map(r=>{const e=n==null?void 0:n.detail.find(i=>i.kriteria_id==r.id);return{kriteria_id:r.id,nilai:(e==null?void 0:e.nilai)||null}})}),_=r=>{const{name:e,value:i}=r.target,s=e.split(".")[1];if(/^\d*\.?\d*$/.test(i)){const c=Number(i);isNaN(c)||o(g=>({...g,attribut:g.attribut.map((v,D)=>D===Number(s)?{...v,nilai:i}:v)}))}},w=r=>{r.preventDefault(),C(route("admin.dataset.update",l.id),{onError:e=>{console.log(e)},onSuccess:()=>{}})},m=(r,e)=>{r&&e!==void 0&&l&&l.attribut?o(r==="label"||r==="jenis_tanaman"?i=>({...i,[r]:e}):i=>({...i,attribut:i.attribut.map((s,c)=>c===Number(r)?{...s,nilai:e}:s)})):console.error("Invalid data: name, value, or attribut may be undefined")};return a.jsxs($,{breadcrumbs:S,children:[a.jsx(V,{title:N??"Edit Data Dataset Tanaman"}),a.jsxs("div",{className:"mx-auto max-w-7xl rounded-xl border border-gray-100 bg-white p-6 shadow",children:[a.jsx("h1",{className:"mb-6 text-center text-xl font-semibold text-primary",children:"Edit Data Dataset Tanaman"}),a.jsxs("form",{onSubmit:w,className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:a.jsxs("div",{children:[a.jsx(t,{className:"text-xs text-gray-600",children:"Jenis Tanaman"}),a.jsxs(d,{value:l.jenis_tanaman,required:!0,onValueChange:r=>m("jenis_tanaman",r),children:[a.jsx(u,{className:"input-minimal",children:a.jsx(p,{placeholder:"Pilih"})}),a.jsx(x,{children:y.map((r,e)=>a.jsx(h,{value:r.nama,children:r.nama},e))})]}),f.jenis_tanaman&&a.jsx(q,{message:f.jenis_tanaman,className:"mt-2"})]})}),a.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:b.map((r,e)=>r.nama.toLowerCase()==="gejala"?a.jsxs("div",{children:[a.jsx(t,{className:"text-xs text-gray-600",children:r.nama}),a.jsxs(d,{value:l.attribut[e].nilai||"",required:!0,onValueChange:i=>m(e.toLocaleString(),i),children:[a.jsx(u,{className:"input-minimal",children:a.jsx(p,{placeholder:"Pilih"})}),a.jsx(x,{children:L.map((i,s)=>a.jsx(h,{value:i.nama,children:i.nama},s))})]})]},e):r.nama.toLowerCase().includes("ph")?a.jsxs("div",{children:[a.jsx(t,{htmlFor:`attribut.${e}`,className:"text-xs text-gray-600",children:r.nama}),a.jsxs(d,{value:l.attribut[e].nilai||"",required:!0,onValueChange:i=>m(e.toLocaleString(),i),children:[a.jsx(u,{className:"input-minimal",children:a.jsx(p,{placeholder:"Pilih"})}),a.jsx(x,{children:["0","1","2","3","4","5","6","7","8"].map((i,s)=>a.jsx(h,{value:i,children:i},s))})]})]},e):a.jsxs("div",{children:[a.jsx(t,{className:"text-xs text-gray-600",children:r.nama}),a.jsx(I,{type:"text",name:`attribut.${e}`,value:l.attribut[e].nilai||"",onChange:_,className:"input-minimal",placeholder:`masukkan ${r.nama}`,required:!0})]},e))}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(T,{type:"submit",variant:"default",children:[k&&a.jsx(P,{className:"h-4 w-4 animate-spin"}),"Update Data"]})})]})]}),a.jsx("style",{children:`
                .input-minimal {
                    background: #f9fafb;
                    border: 1px solid #e5e7eb;
                    border-radius: 8px;
                    padding: 8px 12px;
                    font-size: 14px;
                    outline: none;
                    transition: border 0.2s;
                }
                .input-minimal:focus {
                    border-color: var(--color-primary, #2563eb);
                    background: #fff;
                }
                .bg-primary { background-color: var(--color-primary, #2563eb); }
                .bg-primary-dark { background-color: var(--color-primary-dark, #1d4ed8); }
                .text-primary { color: var(--color-primary, #2563eb); }
            `})]})}export{X as default};
